<!DOCTYPE html>
<html lang="en">

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <UTF-8>

        <title>Registrarse</title>
        <link rel="stylesheet" href="../css/font.css">
        <script src="../js/jquery-3.6.0.min.js" type="text/javascript"></script>
        <script src="../js/saludsecure.js" type="text/javascript"></script>
        <script src="../js/metaMask.js" type="text/javascript"></script>
        <script src="../js/saludSecureABI.js" type="text/javascript"></script>
        <script src="../js/saludsecure.js" type="text/javascript"></script>
        <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
        <script language="javascript" type="text/javascript" 
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <link rel="stylesheet" href="../css/Sesiones.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="Icon" href="../imagenes/logo-Header.png">
</head>


<body class="Rbody">
    <input type="button" id="backgroundimgReg"value="">
    <div id="transition"> 
    <label id="textlos">Los </label> <label id="medicostxt">médicos</label> <label id="textpueden"> pueden:</label>
    </div>
   
    <br><br><br>
    <label id="lbl1">- Agregar pacientes de forma rápida</label>
    <br><br><br>
    <label id="lbl2">- Crear recetas para cada paciente</label>
    <br><br><br>
    <label id="lbl3">- Visualizar las recetas creadas</label>
    



    <div id="registerformM">
      <h1 id="regh1">Registrarse</h1>
      <br>
        <input class= "ingresarR" name="SignInNombrem" id="NomMed" placeholder="Nombre real" />
        <br><br>
        <input class= "ingresarR" name= "Aream" id="AreaMed" placeholder="Area medica" />
        <br><br>
        <input class= "ingresarR" name= "SignInUsum" id="UsuMed"placeholder="Ingresar DNI" />
        <br><br>
        <input class= "ingresarR" name="SingInContram" id="PassMed" type= "password"  placeholder="Crea una contrasenia" />
        <br><br>
        <input class= "ingresarR" name="SingInApellm" id="ApeMed" placeholder="Apellido real" />
        <br><br>
        <input class= "ingresarR" name= "Telefonom" id="teleMed" placeholder="Telefono" />
        <br><br> 
        <div id="divr">
        </div>
        <input id="RegistrarMed" type= "submit" class="minibutton" name= "Registrarse" value="Crear cuenta"/>
        <br><br>    
        <label id="yatienescuenta"  >ya tienes cuenta? </label>
        <a href="../html/Iniciarsesion_med.html" class="linkIS">Inicia Sesion</a>
        <br>
       
    </div>
    <div id="msgDoc">
    </div>
    <script>
        function setearMedico() {
            $("#txStatus").text("Asignando medico. Puede tardar un rato...");
            var nombrePaciente;
            var especializacion;
            pacienteDni = document.getElementById('dnidelpacCrearRec').value;
            medicamento = document.getElementById('tratamiento').value;
            aclaracion = document.getElementById('indicaciones').value;
            console.log(contract.methods)
            var txn = /*await*/ contract.methods.set_receta(pacienteDni, medicamento, aclaracion)
            txn = txn.send({from:web3.eth.currentProvider.selectedAddress});
            txn.then(t => {
                console.log(t)
            }).catch(e => {
                console.log(e)
            })
            /*var txn;
            var sendRecetas;
            async () => {
                txn = await saludSecure.methods.set_Receta();
                txn.send()
                sendRecetas = await saludSecure.methods.sendReceta('#dnidelpacCrearRec', '#tratamiento', '#indicaciones');
            }
            //console.log(sendRecetas)
            console.log(sendRecetas.methods)*/
            return sendRecetas.send({
                    from: userAccount
                })
                .on("receipt", function (receipt) {
                    $("#txStatus").text("¡Receta mandada exitosamente!");
                    //getZombiesByOwner(userAccount).then(displayZombies);   //MOSTRAR PACIENTE??
                })
                .on("error", function (error) {
                    $("#txStatus").text(error);
                });
        }
    </script>
</body>

</html>